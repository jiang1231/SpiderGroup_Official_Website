{% extends "base.html" %}
{#{% block title %}爬虫组{% endblock %}#}
{% block body_attribs %}
{% endblock %}
{% block head %}
{{ super() }}
    <script>
    $(document).ready(function(){
        $("#searchButton").click(function () {
            if($("#content").val()&&$("#password").val()){
            $("#searchButton").attr("disabled", true);
            $.get('/get_data/'+$("#content").val()+'/'+$("#password").val(), function (data, status) {
                if(data === 'error'){
                    //服务端返回error
                    alert('查询错误，请检查帐号密码后重试');
                }
                else {
                    //查询成功
                    $("#result").html(data);
                    $("#searchButton").attr("disabled", false);
                }
            })
            }
            else {
                if(!$("#content").val())
                    $("#content").attr('style', 'border-style: solid;border-color:red;');
                if(!$("#password").val())
                    $("#password").attr('style', 'border-style: solid;border-color:red;');
            }
        })
    })
    </script>
{% endblock %}
{% block page_content %}
    <div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <p> <strong><span style="font-size: 30px;color: #1abc9c">运</span>营商查询 </strong></p>
            <form class="form-horizontal" id="searchForm" >
                <div class="form-group" style="display: inline-block;">
                    <label class="col-sm-4 control-label">手机号:</label>
                    <div class="col-sm-8">
                        <input type="text" id='content' name="content" class="form-control"/>
                    </div>
                </div>
                <div class="form-group" style="display: inline-block;">
                    <label class="col-sm-4 control-label">密码:</label>
                    <div class="col-sm-8">
                    <input type="password"id="password" name="password" class="form-control"/></div>
                </div>
                <div class="form-group" style="display: inline-block;">
                <div class="col-sm-offset-2 col-sm-6">
                    <a role="button" class="btn btn-primary" id="searchButton" > 查询 </a>
                </div>
                    </div>
            </form>
        </div>
    </div>

    <div class="row">
        <div id="result">
        </div>
    </div>
    </div>
{% endblock %}
